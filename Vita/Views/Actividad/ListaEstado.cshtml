@{
    ViewBag.Title = "ListaActividades";
    Layout = "~/Views/Shared/_LayoutPerfilEntidad.cshtml";
}
@model Usuario

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>

<section class="container-fluid">
    <div class="card">
        <div class="card-body">
            <h4 class="card-title">Mis actividades</h4>

            <div class="table-responsive">
                <div class="header-left" style="margin-left:80%;">
                    <a href=""><button type="button" class="btn mb-1 gradient-3" id="btnAprobar" name="btnAprobar" >Aprobar</button> </a>  
                    <a href=""><button type="button" class="btn mb-1 gradient-1" id="btnRechazar" name="btnRechazar" >Rechazar</button> </a>
                </div>
                <br><br><br><br><br>
                <form>
                    
                
               
                <table class="table header-border table-hover verticle-middle">
                    <thead>
                        <tr>
                            <th><input type="checkbox" id="selectall" value="1" onchange='selectAll()' /></th>
                            <th scope="col"></th>
                            <th scope="col">Nombre y apellido</th>
                            <th scope="col">Zona</th>
                            <th scope="col">Edad</th>
                            <th scope="col">Sexo</th>
                            <th scope="col">Estado</th>
                            <th scope="colgroup">Accion</th>
                        </tr>
                    </thead>
                    <tbody>

                        @*@foreach (Actividad i in Model)*@
                        @foreach (Usuario i in ViewBag.ListaUsuario)
                        {
                            if (i.Foto != null && i.Foto.Length > 0)
                            {
                                ViewBag.Url = "data:image;base64," + Convert.ToBase64String(i.Foto);
                            }
                            else
                            {
                                ViewBag.Url = "";
                            }
                        <tr>
                            <td><input type="checkbox" class="case" name="case" /></td>
                            <td><img src="@ViewBag.Url" style="width: 190px; height: 120px;"></td>
                            <td>@i.Nombre @i.Apellido</td>
                            <td>@i.Localidad.Descripcion</td>
                            <td>@Convert.ToInt32(@DateTime.Now.Year - @i.FechaNacimiento.Value.Year)</td>
                            <td>@i.Sexo.Descripcion</td>

                            @foreach (UsuarioInscriptoActividad ua in i.UsuarioInscriptoActividad.Where(x => x.UsuarioId == i.Id))
                            {
                                <td>
                                    <span>@ua.Estado.Descripcion</span>
                                </td>
                            }


                            <td>
                                <span><a href="/Actividad/ModificarActividad" data-toggle="tooltip" data-placement="top" title="Edit"><i class="fa fa-pencil color-muted m-r-5"></i> </a></span>
                            </td>
                            
                        </tr>
                        }

                   
                    </tbody>
                </table>

            </form>
            </div>
        </div>
    </div>
    <script type="text/javascript">
      function selectAll(){
        var items=document.getElementsByName('case');
        for(var i=0; i<items.length; i++){
          if(items[i].type=='checkbox' && items[i].checked==true){
            items[i].checked=false;
            }else{
                items[i].checked=true;
            }
            
        }

      }
      
       
    </script>

    <script type="text/javascript">
        $(function() {
            $('#btnAprobar').attr('disabled', 'disabled');
            $('#btnRechazar').attr('disabled', 'disabled');

                $('#selectall').click(function(){
                    if ($(this).is(':checked')) {
                        $('#btnAprobar').removeAttr('disabled');
                        $('#btnRechazar').removeAttr('disabled');
                        
                    } else {
                        $('#btnAprobar').attr('disabled', 'disabled');
                        $('#btnRechazar').attr('disabled', 'disabled');
                    }
                });

                $('.case').change(function(){
                    if ($(this).is(':checked')) {
                        $('#btnAprobar').removeAttr('disabled');
                        $('#btnRechazar').removeAttr('disabled');
                        
                    } else {
                        $('#btnAprobar').attr('disabled', 'disabled');
                        $('#btnRechazar').attr('disabled', 'disabled');
                    }
                });
            });
    </script>
</section>